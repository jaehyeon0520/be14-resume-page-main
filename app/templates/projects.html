{% extends "base.html" %}

{% block title %}Projects - JaeHyeon{% endblock %}

{% block content %}
<style>
  .carousel-inner {
    display: flex;
    overflow-x: auto;
    scroll-behavior: smooth;
  }

  .carousel-item {
    flex: 0 0 calc(100% / 3);
    max-width: calc(100% / 3);
    padding: 0 10px;
    box-sizing: border-box;
  }

  .card-img-top {
    height: 180px;
    object-fit: cover;
  }

  @media (max-width: 768px) {
    .carousel-item {
      flex: 0 0 100%;
      max-width: 100%;
    }
  }
</style>

<div class="container">
  <h2 class="text-center mb-4">All Projects</h2>

  <div class="position-relative">
    <!-- Carousel Buttons -->
    <button class="btn btn-outline-secondary position-absolute top-50 start-0 translate-middle-y z-3"
            id="prevBtn" style="z-index: 10;">
      <i class="bi bi-chevron-left"></i>
    </button>

    <div class="carousel-inner px-5" id="carouselInner">
      {% for project in projects %}
      <div class="carousel-item">
        <div class="card mb-4 shadow-sm">
          <img src="{{ project.image }}" class="card-img-top" alt="{{ project.title }}">
          <div class="card-body">
            <h5 class="card-title">{{ project.title }}</h5>
            <p class="card-text">{{ project.desc }}</p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <button class="btn btn-outline-secondary position-absolute top-50 end-0 translate-middle-y z-3"
            id="nextBtn" style="z-index: 10;">
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</div>

<!-- 모달 -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-body">
        <img id="modalImage" src="" class="img-fluid" alt="프로젝트 이미지">
      </div>
    </div>
  </div>
</div>

<script>
  const carouselInner = document.getElementById('carouselInner');
  const nextBtn = document.getElementById('nextBtn');
  const prevBtn = document.getElementById('prevBtn');

  nextBtn.addEventListener('click', () => {
    const cardWidth = carouselInner.querySelector('.carousel-item').offsetWidth;
    carouselInner.scrollBy({ left: cardWidth, behavior: 'smooth' });
  });

  prevBtn.addEventListener('click', () => {
    const cardWidth = carouselInner.querySelector('.carousel-item').offsetWidth;
    carouselInner.scrollBy({ left: -cardWidth, behavior: 'smooth' });
  });
</script>
{% endblock %}
